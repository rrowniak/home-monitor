# Home Monitor project

This is Home Monitor project. The main purpose this software is to gather, interpret and store various information coming from different sensors.
Gathered and stored data will be used for further analysis and energy consumption optimizations.

We're living in very turbulent times and one of the (negative) side effect is high energy prices and, what's more worrying, energy availability. These factors force us to be more careful when it's come to energy consumption. The main goal of this project is to increase awarness by looking at what's going on in your house, what's the energy consumtion pattern, what you need to take a look at.

The project is under heavy development, however, there are few areas which form kind of a roadmap of this project:
- More sensors like smart meters, temperature, huminity, pressure, air quality
- More integrations with devices like PV inverters, energy stores, wind turbines, heat pumps, etc
- Getting weather forecasts to predict energy consumpion over next weeks
- Being able to drive devices like heat pump
- Integrate with smart grids
- Give end user nice and clear data presentation
- Integrate with Home Assistant

Power consumption example generated by InfluxDB UI:

![Power consumption example](/doc/screen1.jpg)


## Architecture

The sensors module is implemented as a Python application. There are three main responsibilities for this module:
- Talk to various sensors and get measurements
- Preprocess measurements e.g. probe every 5 seconds, integrate and sent out integrated results every 15 minutes (this is fully configurable)
- Store measurements in 3rd party data stores or queues like InfluxDB, MQTT, etc

Simplified deployment diagram:
![Architecture](/doc/architecture.png)

## Sensors
This module is responsible for gathering data from configured sensors and then the data is stored in specified data source like InfluxDB for further analysis.
In order to run the module execute the following commands:
```
$ cd sensors
$ python3 ./main.py -c ./cfg/sensors.cfg.json -o
```
## Requirements
Required Python modules are listed in [requirements.txt](sensors/requirements.txt).
System requirements:
- `fping` for discovering devices in the local area network using MAC addresses
`$ sudo apt install fping`
### Supported sensors 
- Smart meter Shelly EM3